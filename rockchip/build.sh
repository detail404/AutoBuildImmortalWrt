#!/bin/bash
# Log file for debugging
LOGFILE="/tmp/uci-defaults-log.txt"
echo "Starting 99-custom.sh at $(date)" >> $LOGFILE
# yml 传入的路由器型号 PROFILE
echo "Building for profile: $PROFILE"
# yml 传入的固件大小 ROOTFS_PARTSIZE
echo "Building for ROOTFS_PARTSIZE: $ROOTFS_PARTSIZE"

echo "Create pppoe-settings"
mkdir -p  /home/build/immortalwrt/files/etc/config

# 创建pppoe配置文件 yml传入环境变量ENABLE_PPPOE等 写入配置文件 供99-custom.sh读取
cat << EOF > /home/build/immortalwrt/files/etc/config/pppoe-settings
enable_pppoe=${ENABLE_PPPOE}
pppoe_account=${PPPOE_ACCOUNT}
pppoe_password=${PPPOE_PASSWORD}
EOF

echo "cat pppoe-settings"
cat /home/build/immortalwrt/files/etc/config/pppoe-settings

# 输出调试信息
echo "$(date '+%Y-%m-%d %H:%M:%S') - Starting build process..."

# 定义所需安装的包列表 下列插件你都可以自行删减
PACKAGES=""
PACKAGES="$PACKAGES curl"
PACKAGES="$PACKAGES luci-i18n-diskman-zh-cn"
PACKAGES="$PACKAGES luci-i18n-package-manager-zh-cn"
PACKAGES="$PACKAGES luci-i18n-firewall-zh-cn"
PACKAGES="$PACKAGES luci-app-filebrowser-go"  # 选择一个文件管理包
PACKAGES="$PACKAGES luci-app-argon-config"
PACKAGES="$PACKAGES luci-i18n-argon-config-zh-cn"
PACKAGES="$PACKAGES luci-i18n-ttyd-zh-cn"
PACKAGES="$PACKAGES luci-i18n-passwall-zh-cn"
PACKAGES="$PACKAGES luci-app-openclash"
PACKAGES="$PACKAGES luci-i18n-homeproxy-zh-cn"
PACKAGES="$PACKAGES openssh-sftp-server"
PACKAGES="$PACKAGES luci-i18n-dockerman-zh-cn"
PACKAGES="$PACKAGES 6in4"
PACKAGES="$PACKAGES alist"
PACKAGES="$PACKAGES alsa-lib"
PACKAGES="$PACKAGES alsa-ucm-conf"
PACKAGES="$PACKAGES alsa-utils"
PACKAGES="$PACKAGES appfilter"
PACKAGES="$PACKAGES aria2"
PACKAGES="$PACKAGES ariang"
PACKAGES="$PACKAGES automount"
PACKAGES="$PACKAGES autosamba"
PACKAGES="$PACKAGES avahi-dbus-daemon"
PACKAGES="$PACKAGES base-files"
PACKAGES="$PACKAGES bash"
PACKAGES="$PACKAGES bind-client"
PACKAGES="$PACKAGES block-mount"
PACKAGES="$PACKAGES boost"
PACKAGES="$PACKAGES brook"
PACKAGES="$PACKAGES bsdtar"
PACKAGES="$PACKAGES btrfs-progs"
PACKAGES="$PACKAGES busybox"
PACKAGES="$PACKAGES bzip2"
PACKAGES="$PACKAGES ca-bundle"
PACKAGES="$PACKAGES ca-certificates"
PACKAGES="$PACKAGES cfdisk"
PACKAGES="$PACKAGES chat"
PACKAGES="$PACKAGES chinadns-ng"
PACKAGES="$PACKAGES comgt"
PACKAGES="$PACKAGES comgt-ncm"
PACKAGES="$PACKAGES confuse"
PACKAGES="$PACKAGES coreutils"
PACKAGES="$PACKAGES coreutils-base64"
PACKAGES="$PACKAGES dbus"
PACKAGES="$PACKAGES ddns-scripts"
PACKAGES="$PACKAGES ddns-scripts_aliyun"
PACKAGES="$PACKAGES default-settings"
PACKAGES="$PACKAGES diffutils"
PACKAGES="$PACKAGES dns2socks"
PACKAGES="$PACKAGES dnsmasq-full"
PACKAGES="$PACKAGES dropbear"
PACKAGES="$PACKAGES e2fsprogs"
PACKAGES="$PACKAGES etherwake"
PACKAGES="$PACKAGES ethtool"
PACKAGES="$PACKAGES f2fs-tools"
PACKAGES="$PACKAGES f2fsck"
PACKAGES="$PACKAGES fdisk"
PACKAGES="$PACKAGES frpc"
PACKAGES="$PACKAGES frps"
PACKAGES="$PACKAGES fstools"
PACKAGES="$PACKAGES fstrim"
PACKAGES="$PACKAGES fuse-utils"
PACKAGES="$PACKAGES fwtool"
PACKAGES="$PACKAGES getrandom"
PACKAGES="$PACKAGES glib2"
PACKAGES="$PACKAGES gotop"
PACKAGES="$PACKAGES gpioctl-sysfs"
PACKAGES="$PACKAGES gpiod-tools"
PACKAGES="$PACKAGES gzip"
PACKAGES="$PACKAGES haproxy"
PACKAGES="$PACKAGES haveged"
PACKAGES="$PACKAGES hd-idle"
PACKAGES="$PACKAGES hostapd-common"
PACKAGES="$PACKAGES htop"
PACKAGES="$PACKAGES hysteria"
PACKAGES="$PACKAGES ip-full"
PACKAGES="$PACKAGES iperf"
PACKAGES="$PACKAGES ipset"
PACKAGES="$PACKAGES ipt2socks"
PACKAGES="$PACKAGES iptables-mod-conntrack-extra"
PACKAGES="$PACKAGES iptables-mod-extra"
PACKAGES="$PACKAGES iptables-mod-fullconenat"
PACKAGES="$PACKAGES iptables-mod-iprange"
PACKAGES="$PACKAGES iptables-mod-nat-extra"
PACKAGES="$PACKAGES iptables-mod-socket"
PACKAGES="$PACKAGES iptables-mod-tproxy"
PACKAGES="$PACKAGES iputils-arping"
PACKAGES="$PACKAGES irqbalance"
PACKAGES="$PACKAGES iw"
PACKAGES="$PACKAGES iwinfo"
PACKAGES="$PACKAGES jq"
PACKAGES="$PACKAGES jshn"
PACKAGES="$PACKAGES jsonfilter"
PACKAGES="$PACKAGES kcptun-client"
PACKAGES="$PACKAGES kcptun-config"
PACKAGES="$PACKAGES kernel"
PACKAGES="$PACKAGES kmod-asn1-decoder"
PACKAGES="$PACKAGES kmod-bonding"
PACKAGES="$PACKAGES kmod-crypto-aead"
PACKAGES="$PACKAGES kmod-crypto-arc4"
PACKAGES="$PACKAGES kmod-crypto-authenc"
PACKAGES="$PACKAGES kmod-crypto-cbc"
PACKAGES="$PACKAGES kmod-crypto-ccm"
PACKAGES="$PACKAGES kmod-crypto-cmac"
PACKAGES="$PACKAGES kmod-crypto-crc32"
PACKAGES="$PACKAGES kmod-crypto-crc32c"
PACKAGES="$PACKAGES kmod-crypto-ctr"
PACKAGES="$PACKAGES kmod-crypto-cts"
PACKAGES="$PACKAGES kmod-crypto-deflate"
PACKAGES="$PACKAGES kmod-crypto-des"
PACKAGES="$PACKAGES kmod-crypto-ecb"
PACKAGES="$PACKAGES kmod-crypto-echainiv"
PACKAGES="$PACKAGES kmod-crypto-hash"
PACKAGES="$PACKAGES kmod-crypto-hmac"
PACKAGES="$PACKAGES kmod-crypto-kpp"
PACKAGES="$PACKAGES kmod-crypto-lib-chacha20"
PACKAGES="$PACKAGES kmod-crypto-lib-chacha20poly1305"
PACKAGES="$PACKAGES kmod-crypto-lib-curve25519"
PACKAGES="$PACKAGES kmod-crypto-lib-poly1305"
PACKAGES="$PACKAGES kmod-crypto-manager"
PACKAGES="$PACKAGES kmod-crypto-md4"
PACKAGES="$PACKAGES kmod-crypto-md5"
PACKAGES="$PACKAGES kmod-crypto-null"
PACKAGES="$PACKAGES kmod-crypto-rng"
PACKAGES="$PACKAGES kmod-crypto-seqiv"
PACKAGES="$PACKAGES kmod-crypto-sha1"
PACKAGES="$PACKAGES kmod-crypto-sha256"
PACKAGES="$PACKAGES kmod-crypto-sha512"
PACKAGES="$PACKAGES kmod-crypto-user"
PACKAGES="$PACKAGES kmod-dax"
PACKAGES="$PACKAGES kmod-dm"
PACKAGES="$PACKAGES kmod-dnsresolver"
PACKAGES="$PACKAGES kmod-fs-btrfs"
PACKAGES="$PACKAGES kmod-fs-cifs"
PACKAGES="$PACKAGES kmod-fs-exfat"
PACKAGES="$PACKAGES kmod-fs-exportfs"
PACKAGES="$PACKAGES kmod-fs-ext4"
PACKAGES="$PACKAGES kmod-fs-f2fs"
PACKAGES="$PACKAGES kmod-fs-nfs"
PACKAGES="$PACKAGES kmod-fs-nfs-common"
PACKAGES="$PACKAGES kmod-fs-nfs-v3"
PACKAGES="$PACKAGES kmod-fs-nfs-v4"
PACKAGES="$PACKAGES kmod-fs-nfsd"
PACKAGES="$PACKAGES kmod-fs-ntfs3"
PACKAGES="$PACKAGES kmod-fs-squashfs"
PACKAGES="$PACKAGES kmod-fs-vfat"
PACKAGES="$PACKAGES kmod-fuse"
PACKAGES="$PACKAGES kmod-gpio-button-hotplug"
PACKAGES="$PACKAGES kmod-gre"
PACKAGES="$PACKAGES kmod-ifb"
PACKAGES="$PACKAGES kmod-inet-diag"
PACKAGES="$PACKAGES kmod-ip6tables"
PACKAGES="$PACKAGES kmod-ipsec"
PACKAGES="$PACKAGES kmod-ipsec4"
PACKAGES="$PACKAGES kmod-ipsec6"
PACKAGES="$PACKAGES kmod-ipt-conntrack"
PACKAGES="$PACKAGES kmod-ipt-conntrack-extra"
PACKAGES="$PACKAGES kmod-ipt-core"
PACKAGES="$PACKAGES kmod-ipt-extra"
PACKAGES="$PACKAGES kmod-ipt-ipopt"
PACKAGES="$PACKAGES kmod-ipt-iprange"
PACKAGES="$PACKAGES kmod-ipt-ipsec"
PACKAGES="$PACKAGES kmod-ipt-ipset"
PACKAGES="$PACKAGES kmod-ipt-nat"
PACKAGES="$PACKAGES kmod-ipt-nat-extra"
PACKAGES="$PACKAGES kmod-ipt-nat6"
PACKAGES="$PACKAGES kmod-ipt-offload"
PACKAGES="$PACKAGES kmod-ipt-raw"
PACKAGES="$PACKAGES kmod-ipt-socket"
PACKAGES="$PACKAGES kmod-ipt-tproxy"
PACKAGES="$PACKAGES kmod-iptunnel"
PACKAGES="$PACKAGES kmod-iptunnel4"
PACKAGES="$PACKAGES kmod-iptunnel6"
PACKAGES="$PACKAGES kmod-keys-encrypted"
PACKAGES="$PACKAGES kmod-keys-trusted"
PACKAGES="$PACKAGES kmod-l2tp"
PACKAGES="$PACKAGES kmod-lib-crc-ccitt"
PACKAGES="$PACKAGES kmod-lib-crc16"
PACKAGES="$PACKAGES kmod-lib-crc32c"
PACKAGES="$PACKAGES kmod-lib-lzo"
PACKAGES="$PACKAGES kmod-lib-raid6"
PACKAGES="$PACKAGES kmod-lib-textsearch"
PACKAGES="$PACKAGES kmod-lib-xor"
PACKAGES="$PACKAGES kmod-lib-zlib-deflate"
PACKAGES="$PACKAGES kmod-lib-zlib-inflate"
PACKAGES="$PACKAGES kmod-lib-zstd"
PACKAGES="$PACKAGES kmod-libphy"
PACKAGES="$PACKAGES kmod-macvlan"
PACKAGES="$PACKAGES kmod-md-mod"
PACKAGES="$PACKAGES kmod-md-raid0"
PACKAGES="$PACKAGES kmod-md-raid1"
PACKAGES="$PACKAGES kmod-md-raid10"
PACKAGES="$PACKAGES kmod-md-raid456"
PACKAGES="$PACKAGES kmod-mii"
PACKAGES="$PACKAGES kmod-mppe"
PACKAGES="$PACKAGES kmod-nf-conntrack"
PACKAGES="$PACKAGES kmod-nf-conntrack-netlink"
PACKAGES="$PACKAGES kmod-nf-conntrack6"
PACKAGES="$PACKAGES kmod-nf-flow"
PACKAGES="$PACKAGES kmod-nf-ipt"
PACKAGES="$PACKAGES kmod-nf-ipt6"
PACKAGES="$PACKAGES kmod-nf-log"
PACKAGES="$PACKAGES kmod-nf-log6"
PACKAGES="$PACKAGES kmod-nf-nat"
PACKAGES="$PACKAGES kmod-nf-nat6"
PACKAGES="$PACKAGES kmod-nf-nathelper"
PACKAGES="$PACKAGES kmod-nf-nathelper-extra"
PACKAGES="$PACKAGES kmod-nf-reject"
PACKAGES="$PACKAGES kmod-nf-reject6"
PACKAGES="$PACKAGES kmod-nf-socket"
PACKAGES="$PACKAGES kmod-nf-tproxy"
PACKAGES="$PACKAGES kmod-nfnetlink"
PACKAGES="$PACKAGES kmod-nls-base"
PACKAGES="$PACKAGES kmod-nls-cp437"
PACKAGES="$PACKAGES kmod-nls-iso8859-1"
PACKAGES="$PACKAGES kmod-nls-utf8"
PACKAGES="$PACKAGES kmod-oaf"
PACKAGES="$PACKAGES kmod-oid-registry"
PACKAGES="$PACKAGES kmod-ppp"
PACKAGES="$PACKAGES kmod-pppoe"
PACKAGES="$PACKAGES kmod-pppol2tp"
PACKAGES="$PACKAGES kmod-pppox"
PACKAGES="$PACKAGES kmod-pptp"
PACKAGES="$PACKAGES kmod-random-core"
PACKAGES="$PACKAGES kmod-sched-cake"
PACKAGES="$PACKAGES kmod-sched-core"
PACKAGES="$PACKAGES kmod-scsi-core"
PACKAGES="$PACKAGES kmod-sit"
PACKAGES="$PACKAGES kmod-slhc"
PACKAGES="$PACKAGES kmod-sound-core"
PACKAGES="$PACKAGES kmod-tcp-bbr"
PACKAGES="$PACKAGES kmod-tpm"
PACKAGES="$PACKAGES kmod-tun"
PACKAGES="$PACKAGES kmod-udptunnel4"
PACKAGES="$PACKAGES kmod-udptunnel6"
PACKAGES="$PACKAGES kmod-usb-acm"
PACKAGES="$PACKAGES kmod-usb-audio"
PACKAGES="$PACKAGES kmod-usb-core"
PACKAGES="$PACKAGES kmod-usb-dwc2"
PACKAGES="$PACKAGES kmod-usb-dwc3"
PACKAGES="$PACKAGES kmod-usb-ehci"
PACKAGES="$PACKAGES kmod-usb-gadget"
PACKAGES="$PACKAGES kmod-usb-net"
PACKAGES="$PACKAGES kmod-usb-net-asix"
PACKAGES="$PACKAGES kmod-usb-net-cdc-eem"
PACKAGES="$PACKAGES kmod-usb-net-cdc-ether"
PACKAGES="$PACKAGES kmod-usb-net-cdc-mbim"
PACKAGES="$PACKAGES kmod-usb-net-cdc-ncm"
PACKAGES="$PACKAGES kmod-usb-net-cdc-subset"
PACKAGES="$PACKAGES kmod-usb-net-hso"
PACKAGES="$PACKAGES kmod-usb-net-huawei-cdc-ncm"
PACKAGES="$PACKAGES kmod-usb-net-ipheth"
PACKAGES="$PACKAGES kmod-usb-net-kalmia"
PACKAGES="$PACKAGES kmod-usb-net-kaweth"
PACKAGES="$PACKAGES kmod-usb-net-pegasus"
PACKAGES="$PACKAGES kmod-usb-net-pl"
PACKAGES="$PACKAGES kmod-usb-net-qmi-wwan"
PACKAGES="$PACKAGES kmod-usb-net-rndis"
PACKAGES="$PACKAGES kmod-usb-net-rtl8150"
PACKAGES="$PACKAGES kmod-usb-net-rtl8152"
PACKAGES="$PACKAGES kmod-usb-net-sierrawireless"
PACKAGES="$PACKAGES kmod-usb-ohci"
PACKAGES="$PACKAGES kmod-usb-ohci-pci"
PACKAGES="$PACKAGES kmod-usb-printer"
PACKAGES="$PACKAGES kmod-usb-roles"
PACKAGES="$PACKAGES kmod-usb-serial"
PACKAGES="$PACKAGES kmod-usb-serial-option"
PACKAGES="$PACKAGES kmod-usb-serial-wwan"
PACKAGES="$PACKAGES kmod-usb-storage"
PACKAGES="$PACKAGES kmod-usb-storage-extras"
PACKAGES="$PACKAGES kmod-usb-storage-uas"
PACKAGES="$PACKAGES kmod-usb-uhci"
PACKAGES="$PACKAGES kmod-usb-wdm"
PACKAGES="$PACKAGES kmod-usb-xhci-hcd"
PACKAGES="$PACKAGES kmod-usb2"
PACKAGES="$PACKAGES kmod-usb2-pci"
PACKAGES="$PACKAGES kmod-usb3"
PACKAGES="$PACKAGES kmod-wireguard"
PACKAGES="$PACKAGES lame-lib"
PACKAGES="$PACKAGES libao"
PACKAGES="$PACKAGES libarchive"
PACKAGES="$PACKAGES libatomic1"
PACKAGES="$PACKAGES libattr"
PACKAGES="$PACKAGES libavahi-client"
PACKAGES="$PACKAGES libavahi-dbus-support"
PACKAGES="$PACKAGES libblkid1"
PACKAGES="$PACKAGES libbz2-1.0"
PACKAGES="$PACKAGES libc"
PACKAGES="$PACKAGES libcap"
PACKAGES="$PACKAGES libcap-bin"
PACKAGES="$PACKAGES libcares"
PACKAGES="$PACKAGES libcomerr0"
PACKAGES="$PACKAGES libconfig11"
PACKAGES="$PACKAGES libcurl4"
PACKAGES="$PACKAGES libdaemon"
PACKAGES="$PACKAGES libdbus"
PACKAGES="$PACKAGES libdevmapper"
PACKAGES="$PACKAGES libedit"
PACKAGES="$PACKAGES libelf1"
PACKAGES="$PACKAGES libertas-usb-firmware"
PACKAGES="$PACKAGES libev"
PACKAGES="$PACKAGES libevent2-7"
PACKAGES="$PACKAGES libevent2-core7"
PACKAGES="$PACKAGES libexif"
PACKAGES="$PACKAGES libexpat"
PACKAGES="$PACKAGES libext2fs2"
PACKAGES="$PACKAGES libf2fs6"
PACKAGES="$PACKAGES libfdisk1"
PACKAGES="$PACKAGES libffi"
PACKAGES="$PACKAGES libffmpeg-full"
PACKAGES="$PACKAGES libflac"
PACKAGES="$PACKAGES libfreetype"
PACKAGES="$PACKAGES libfuse1"
PACKAGES="$PACKAGES libgcc1"
PACKAGES="$PACKAGES libgcrypt"
PACKAGES="$PACKAGES libgd-full"
PACKAGES="$PACKAGES libgdbm"
PACKAGES="$PACKAGES libgmp10"
PACKAGES="$PACKAGES libgnutls"
PACKAGES="$PACKAGES libgpg-error"
PACKAGES="$PACKAGES libgpiod"
PACKAGES="$PACKAGES libhavege"
PACKAGES="$PACKAGES libiconv-full2"
PACKAGES="$PACKAGES libid3tag"
PACKAGES="$PACKAGES libip4tc2"
PACKAGES="$PACKAGES libip6tc2"
PACKAGES="$PACKAGES libipset13"
PACKAGES="$PACKAGES libiwinfo-lua"
PACKAGES="$PACKAGES libiwinfo20210430"
PACKAGES="$PACKAGES libjpeg-turbo"
PACKAGES="$PACKAGES libjson-c5"
PACKAGES="$PACKAGES libkeyutils1"
PACKAGES="$PACKAGES libkmod"
PACKAGES="$PACKAGES libltdl7"
PACKAGES="$PACKAGES liblua5.1.5"
PACKAGES="$PACKAGES liblua5.3-5.3"
PACKAGES="$PACKAGES liblzma"
PACKAGES="$PACKAGES liblzo2"
PACKAGES="$PACKAGES libmaxminddb"
PACKAGES="$PACKAGES libmbedtls12"
PACKAGES="$PACKAGES libmbim"
PACKAGES="$PACKAGES libminiupnpc"
PACKAGES="$PACKAGES libmnl0"
PACKAGES="$PACKAGES libmount1"
PACKAGES="$PACKAGES libnatpmp1"
PACKAGES="$PACKAGES libncurses6"
PACKAGES="$PACKAGES libnetsnmp"
PACKAGES="$PACKAGES libnettle8"
PACKAGES="$PACKAGES libnghttp2-14"
PACKAGES="$PACKAGES libnl-tiny2022-11-01"
PACKAGES="$PACKAGES libogg0"
PACKAGES="$PACKAGES libopenssl-conf"
PACKAGES="$PACKAGES libopenssl1.1"
PACKAGES="$PACKAGES libopus"
PACKAGES="$PACKAGES libparted"
PACKAGES="$PACKAGES libpcap1"
PACKAGES="$PACKAGES libpci"
PACKAGES="$PACKAGES libpcre"
PACKAGES="$PACKAGES libpcre2"
PACKAGES="$PACKAGES libplist"
PACKAGES="$PACKAGES libpng"
PACKAGES="$PACKAGES libpopt0"
PACKAGES="$PACKAGES libprotobuf-c"
PACKAGES="$PACKAGES libpthread"
PACKAGES="$PACKAGES libpython3-3.10"
PACKAGES="$PACKAGES libqmi"
PACKAGES="$PACKAGES libqrtr-glib"
PACKAGES="$PACKAGES libreadline8"
PACKAGES="$PACKAGES librt"
PACKAGES="$PACKAGES libruby3.1"
PACKAGES="$PACKAGES libsmartcols1"
PACKAGES="$PACKAGES libsodium"
PACKAGES="$PACKAGES libsoxr"
PACKAGES="$PACKAGES libsqlite3-0"
PACKAGES="$PACKAGES libss2"
PACKAGES="$PACKAGES libssh"
PACKAGES="$PACKAGES libstdcpp6"
PACKAGES="$PACKAGES libtasn1"
PACKAGES="$PACKAGES libtiff5"
PACKAGES="$PACKAGES libtirpc"
PACKAGES="$PACKAGES libubox20220927"
PACKAGES="$PACKAGES libubus-lua"
PACKAGES="$PACKAGES libubus20220601"
PACKAGES="$PACKAGES libuci-lua"
PACKAGES="$PACKAGES libuci20130104"
PACKAGES="$PACKAGES libuclient20201210"
PACKAGES="$PACKAGES libudns"
PACKAGES="$PACKAGES libugpio"
PACKAGES="$PACKAGES libunistring"
PACKAGES="$PACKAGES liburing"
PACKAGES="$PACKAGES libusb-1.0-0"
PACKAGES="$PACKAGES libustream-openssl20201210"
PACKAGES="$PACKAGES libuuid1"
PACKAGES="$PACKAGES libuv1"
PACKAGES="$PACKAGES libvorbis"
PACKAGES="$PACKAGES libwebp"
PACKAGES="$PACKAGES libwebsockets-full"
PACKAGES="$PACKAGES libwolfssl-benchmark"
PACKAGES="$PACKAGES libwolfssl5.5.4.e624513f"
PACKAGES="$PACKAGES libwrap"
PACKAGES="$PACKAGES libxml2"
PACKAGES="$PACKAGES libxtables12"
PACKAGES="$PACKAGES libyaml"
PACKAGES="$PACKAGES libzip-gnutls"
PACKAGES="$PACKAGES logd"
PACKAGES="$PACKAGES lsblk"
PACKAGES="$PACKAGES lscpu"
PACKAGES="$PACKAGES lua"
PACKAGES="$PACKAGES lua-cjson"
PACKAGES="$PACKAGES lua-maxminddb"
PACKAGES="$PACKAGES lua-neturl"
PACKAGES="$PACKAGES luasocket"
PACKAGES="$PACKAGES luci"
PACKAGES="$PACKAGES luci-app-accesscontrol"
PACKAGES="$PACKAGES luci-app-adbyby-plus"
PACKAGES="$PACKAGES luci-app-adguardhome"
PACKAGES="$PACKAGES luci-app-airplay2"
PACKAGES="$PACKAGES luci-app-alist"
PACKAGES="$PACKAGES luci-app-argon-config"
PACKAGES="$PACKAGES luci-app-aria2"
PACKAGES="$PACKAGES luci-app-arpbind"
PACKAGES="$PACKAGES luci-app-autoreboot"
PACKAGES="$PACKAGES luci-app-cifs-mount"
PACKAGES="$PACKAGES luci-app-commands"
PACKAGES="$PACKAGES luci-app-cpufreq"
PACKAGES="$PACKAGES luci-app-ddns"
PACKAGES="$PACKAGES luci-app-diskman"
PACKAGES="$PACKAGES luci-app-eqos"
PACKAGES="$PACKAGES luci-app-fileassistant"
PACKAGES="$PACKAGES luci-app-filebrowser-go"  # 保留一个文件管理包
PACKAGES="$PACKAGES luci-app-filetransfer"
PACKAGES="$PACKAGES luci-app-firewall"
PACKAGES="$PACKAGES luci-app-frpc"
PACKAGES="$PACKAGES luci-app-frps"
PACKAGES="$PACKAGES luci-app-gowebdav"
PACKAGES="$PACKAGES luci-app-guest-wifi"
PACKAGES="$PACKAGES luci-app-haproxy-tcp"
PACKAGES="$PACKAGES luci-app-hd-idle"
PACKAGES="$PACKAGES luci-app-ipsec-server"
PACKAGES="$PACKAGES luci-app-irqbalance"
PACKAGES="$PACKAGES luci-app-kodexplorer"
PACKAGES="$PACKAGES luci-app-minidlna"
PACKAGES="$PACKAGES luci-app-music-remote-center"
PACKAGES="$PACKAGES luci-app-mwan3"
PACKAGES="$PACKAGES luci-app-mwan3helper"
PACKAGES="$PACKAGES luci-app-netdata"
PACKAGES="$PACKAGES luci-app-nfs"
PACKAGES="$PACKAGES luci-app-nlbwmon"
PACKAGES="$PACKAGES luci-app-nps"
PACKAGES="$PACKAGES luci-app-oaf"
PACKAGES="$PACKAGES luci-app-openclash"
PACKAGES="$PACKAGES luci-app-openvpn-server"
PACKAGES="$PACKAGES luci-app-passwall"
PACKAGES="$PACKAGES luci-app-passwall2"
PACKAGES="$PACKAGES luci-app-poweroff"
PACKAGES="$PACKAGES luci-app-pptp-server"
PACKAGES="$PACKAGES luci-app-ps3netsrv"
PACKAGES="$PACKAGES luci-app-pushbot"
PACKAGES="$PACKAGES luci-app-qbittorrent"
PACKAGES="$PACKAGES luci-app-rclone"
PACKAGES="$PACKAGES luci-app-samba4"
PACKAGES="$PACKAGES luci-app-shairplay"
PACKAGES="$PACKAGES luci-app-socat"
PACKAGES="$PACKAGES luci-app-softethervpn"
PACKAGES="$PACKAGES luci-app-sqm"
PACKAGES="$PACKAGES luci-app-ssr-mudb-server"
PACKAGES="$PACKAGES luci-app-ssr-plus"
PACKAGES="$PACKAGES luci-app-syncdial"
PACKAGES="$PACKAGES luci-app-tinyproxy"
PACKAGES="$PACKAGES luci-app-transmission"
PACKAGES="$PACKAGES luci-app-ttyd"
PACKAGES="$PACKAGES luci-app-turboacc"
PACKAGES="$PACKAGES luci-app-udpxy"
PACKAGES="$PACKAGES luci-app-unblockneteasemusic"
PACKAGES="$PACKAGES luci-app-upnp"
PACKAGES="$PACKAGES luci-app-usb-printer"
PACKAGES="$PACKAGES luci-app-uugamebooster"
PACKAGES="$PACKAGES luci-app-vlmcsd"
PACKAGES="$PACKAGES luci-app-vsftpd"
PACKAGES="$PACKAGES luci-app-vssr"
PACKAGES="$PACKAGES luci-app-webadmin"
PACKAGES="$PACKAGES luci-app-wifischedule"
PACKAGES="$PACKAGES luci-app-wireguard"
PACKAGES="$PACKAGES luci-app-wol"
PACKAGES="$PACKAGES luci-app-wrtbwmon"
PACKAGES="$PACKAGES luci-app-xlnetacc"
PACKAGES="$PACKAGES luci-app-zerotier"
PACKAGES="$PACKAGES luci-base"
PACKAGES="$PACKAGES luci-compat"
PACKAGES="$PACKAGES luci-i18n-accesscontrol-zh-cn"
PACKAGES="$PACKAGES luci-i18n-adbyby-plus-zh-cn"
PACKAGES="$PACKAGES luci-i18n-adguardhome-zh-cn"
PACKAGES="$PACKAGES luci-i18n-airplay2-zh-cn"
PACKAGES="$PACKAGES luci-i18n-alist-zh-cn"
PACKAGES="$PACKAGES luci-i18n-aliyundrive-webdav-zh-cn"
PACKAGES="$PACKAGES luci-i18n-argon-config-es"
PACKAGES="$PACKAGES luci-i18n-argon-config-zh-cn"
PACKAGES="$PACKAGES luci-i18n-aria2-zh-cn"
PACKAGES="$PACKAGES luci-i18n-arpbind-zh-cn"
PACKAGES="$PACKAGES luci-i18n-autoreboot-zh-cn"
PACKAGES="$PACKAGES luci-i18n-bonding-zh-cn"
PACKAGES="$PACKAGES luci-i18n-cifs-mount-zh-cn"
PACKAGES="$PACKAGES luci-i18n-commands-zh-cn"
PACKAGES="$PACKAGES luci-i18n-cpufreq-zh-cn"
PACKAGES="$PACKAGES luci-i18n-ddns-zh-cn"
PACKAGES="$PACKAGES luci-i18n-ddnsto-zh-cn"
PACKAGES="$PACKAGES luci-i18n-diskman-zh-cn"
PACKAGES="$PACKAGES luci-i18n-filebrowser-zh-cn"
PACKAGES="$PACKAGES luci-i18n-filetransfer-zh-cn"
PACKAGES="$PACKAGES luci-i18n-firewall-zh-cn"
PACKAGES="$PACKAGES luci-i18n-frpc-zh-cn"
PACKAGES="$PACKAGES luci-i18n-frps-zh-cn"
PACKAGES="$PACKAGES luci-i18n-guest-wifi-zh-cn"
PACKAGES="$PACKAGES luci-i18n-haproxy-tcp-zh-cn"
PACKAGES="$PACKAGES luci-i18n-hd-idle-zh-cn"
PACKAGES="$PACKAGES luci-i18n-ipsec-server-zh-cn"
PACKAGES="$PACKAGES luci-i18n-irqbalance-zh-cn"
PACKAGES="$PACKAGES luci-i18n-kodexplorer-zh-cn"
PACKAGES="$PACKAGES luci-i18n-minidlna-zh-cn"
PACKAGES="$PACKAGES luci-i18n-music-remote-center-zh-cn"
PACKAGES="$PACKAGES luci-i18n-mwan3-zh-cn"
PACKAGES="$PACKAGES luci-i18n-mwan3helper-zh-cn"
PACKAGES="$PACKAGES luci-i18n-netdata-zh-cn"
PACKAGES="$PACKAGES luci-i18n-nfs-zh-cn"
PACKAGES="$PACKAGES luci-i18n-nlbwmon-zh-cn"
PACKAGES="$PACKAGES luci-i18n-nps-zh-cn"
PACKAGES="$PACKAGES luci-i18n-oaf-zh-cn"
PACKAGES="$PACKAGES luci-i18n-openvpn-server-zh-cn"
PACKAGES="$PACKAGES luci-i18n-passwall-zh-cn"
PACKAGES="$PACKAGES luci-i18n-passwall2-zh-cn"
PACKAGES="$PACKAGES luci-i18n-poweroff-zh-cn"
PACKAGES="$PACKAGES luci-i18n-pptp-server-zh-cn"
PACKAGES="$PACKAGES luci-i18n-ps3netsrv-zh-cn"
PACKAGES="$PACKAGES luci-i18n-qbittorrent-zh-cn"
PACKAGES="$PACKAGES luci-i18n-rclone-zh-cn"
PACKAGES="$PACKAGES luci-i18n-samba4-zh-cn"
PACKAGES="$PACKAGES luci-i18n-shairplay-zh-cn"
PACKAGES="$PACKAGES luci-i18n-socat-zh-cn"
PACKAGES="$PACKAGES luci-i18n-softethervpn-zh-cn"
PACKAGES="$PACKAGES luci-i18n-sqm-zh-cn"
PACKAGES="$PACKAGES luci-i18n-ssr-mudb-server-zh-cn"
PACKAGES="$PACKAGES luci-i18n-ssr-plus-zh-cn"
PACKAGES="$PACKAGES luci-i18n-tinyproxy-zh-cn"
PACKAGES="$PACKAGES luci-i18n-transmission-zh-cn"
PACKAGES="$PACKAGES luci-i18n-ttyd-zh-cn"
PACKAGES="$PACKAGES luci-i18n-turboacc-zh-cn"
PACKAGES="$PACKAGES luci-i18n-udpxy-zh-cn"
PACKAGES="$PACKAGES luci-i18n-upnp-zh-cn"
PACKAGES="$PACKAGES luci-i18n-usb-printer-zh-cn"
PACKAGES="$PACKAGES luci-i18n-uugamebooster-zh-cn"
PACKAGES="$PACKAGES luci-i18n-vlmcsd-zh-cn"
PACKAGES="$PACKAGES luci-i18n-vsftpd-zh-cn"
PACKAGES="$PACKAGES luci-i18n-vssr-zh-cn"
PACKAGES="$PACKAGES luci-i18n-webadmin-zh-cn"
PACKAGES="$PACKAGES luci-i18n-wifischedule-zh-cn"
PACKAGES="$PACKAGES luci-i18n-wireguard-zh-cn"
PACKAGES="$PACKAGES luci-i18n-wol-zh-cn"
PACKAGES="$PACKAGES luci-i18n-wrtbwmon-zh-cn"
PACKAGES="$PACKAGES luci-i18n-xlnetacc-zh-cn"
PACKAGES="$PACKAGES luci-i18n-zerotier-zh-cn"
PACKAGES="$PACKAGES luci-lib-fs"
PACKAGES="$PACKAGES luci-lib-ip"
PACKAGES="$PACKAGES luci-lib-ipkg"
PACKAGES="$PACKAGES luci-lib-jsonc"
PACKAGES="$PACKAGES luci-lib-nixio"
PACKAGES="$PACKAGES luci-mod-admin-full"
PACKAGES="$PACKAGES luci-newapi"
PACKAGES="$PACKAGES luci-proto-3g"
PACKAGES="$PACKAGES luci-proto-bonding"
PACKAGES="$PACKAGES luci-proto-ipv6"
PACKAGES="$PACKAGES luci-proto-minieap"
PACKAGES="$PACKAGES luci-proto-ncm"
PACKAGES="$PACKAGES luci-proto-openconnect"
PACKAGES="$PACKAGES luci-proto-ppp"
PACKAGES="$PACKAGES luci-proto-qmi"
PACKAGES="$PACKAGES luci-proto-relay"
PACKAGES="$PACKAGES luci-proto-wireguard"
PACKAGES="$PACKAGES luci-theme-argon"
PACKAGES="$PACKAGES luci-theme-bootstrap"
PACKAGES="$PACKAGES luci-theme-material"
PACKAGES="$PACKAGES mdadm"
PACKAGES="$PACKAGES mentohust"
PACKAGES="$PACKAGES microsocks"
PACKAGES="$PACKAGES minidlna"
PACKAGES="$PACKAGES minieap"
PACKAGES="$PACKAGES miniupnpd"
PACKAGES="$PACKAGES mkf2fs"
PACKAGES="$PACKAGES mount-utils"
PACKAGES="$PACKAGES msgpack-c"
PACKAGES="$PACKAGES mtd"
PACKAGES="$PACKAGES mwan3"
PACKAGES="$PACKAGES mxml"
PACKAGES="$PACKAGES naiveproxy"
PACKAGES="$PACKAGES nano"
PACKAGES="$PACKAGES netdata"
PACKAGES="$PACKAGES netifd"
PACKAGES="$PACKAGES nfs-kernel-server"
PACKAGES="$PACKAGES nfs-utils"
PACKAGES="$PACKAGES nginx"
PACKAGES="$PACKAGES nginx-ssl"
PACKAGES="$PACKAGES nginx-util"
PACKAGES="$PACKAGES nlbwmon"
PACKAGES="$PACKAGES node"
PACKAGES="$PACKAGES npc"
PACKAGES="$PACKAGES odhcp6c"
PACKAGES="$PACKAGES odhcpd-ipv6only"
PACKAGES="$PACKAGES oniguruma5"
PACKAGES="$PACKAGES openconnect"
PACKAGES="$PACKAGES openssh-sftp-client"
PACKAGES="$PACKAGES openssh-sftp-server"
PACKAGES="$PACKAGES openssl-util"
PACKAGES="$PACKAGES openvpn-easy-rsa"
PACKAGES="$PACKAGES openvpn-openssl"
PACKAGES="$PACKAGES openwrt-keyring"
PACKAGES="$PACKAGES opkg"
PACKAGES="$PACKAGES owntone"
PACKAGES="$PACKAGES p910nd"
PACKAGES="$PACKAGES pandownload-fake-server"
PACKAGES="$PACKAGES parted"
PACKAGES="$PACKAGES partx-utils"
PACKAGES="$PACKAGES pciids"
PACKAGES="$PACKAGES pciutils"
PACKAGES="$PACKAGES pdnsd-alt"
PACKAGES="$PACKAGES php8"
PACKAGES="$PACKAGES php8-cgi"
PACKAGES="$PACKAGES php8-fastcgi"
PACKAGES="$PACKAGES php8-fpm"
PACKAGES="$PACKAGES php8-mod-curl"
PACKAGES="$PACKAGES php8-mod-dom"
PACKAGES="$PACKAGES php8-mod-gd"
PACKAGES="$PACKAGES php8-mod-iconv"
PACKAGES="$PACKAGES php8-mod-mbstring"
PACKAGES="$PACKAGES php8-mod-mysqlnd"
PACKAGES="$PACKAGES php8-mod-opcache"
PACKAGES="$PACKAGES php8-mod-pdo"
PACKAGES="$PACKAGES php8-mod-pdo-mysql"
PACKAGES="$PACKAGES php8-mod-pdo-sqlite"
PACKAGES="$PACKAGES php8-mod-session"
PACKAGES="$PACKAGES php8-mod-sqlite3"
PACKAGES="$PACKAGES php8-mod-xml"
PACKAGES="$PACKAGES php8-mod-xmlreader"
PACKAGES="$PACKAGES php8-mod-xmlwriter"
PACKAGES="$PACKAGES php8-mod-zip"
PACKAGES="$PACKAGES ppp"
PACKAGES="$PACKAGES ppp-mod-pppoe"
PACKAGES="$PACKAGES ppp-mod-pppol2tp"
PACKAGES="$PACKAGES ppp-mod-pptp"
PACKAGES="$PACKAGES pptpd"
PACKAGES="$PACKAGES procd"
PACKAGES="$PACKAGES procd-seccomp"
PACKAGES="$PACKAGES procd-ujail"
PACKAGES="$PACKAGES proto-bonding"
PACKAGES="$PACKAGES ps3netsrv"
PACKAGES="$PACKAGES python3"
PACKAGES="$PACKAGES python3-asyncio"
PACKAGES="$PACKAGES python3-base"
PACKAGES="$PACKAGES python3-cgi"
PACKAGES="$PACKAGES python3-cgitb"
PACKAGES="$PACKAGES python3-codecs"
PACKAGES="$PACKAGES python3-ctypes"
PACKAGES="$PACKAGES python3-dbm"
PACKAGES="$PACKAGES python3-decimal"
PACKAGES="$PACKAGES python3-distutils"
PACKAGES="$PACKAGES python3-email"
PACKAGES="$PACKAGES python3-light"
PACKAGES="$PACKAGES python3-logging"
PACKAGES="$PACKAGES python3-lzma"
PACKAGES="$PACKAGES python3-multiprocessing"
PACKAGES="$PACKAGES python3-ncurses"
PACKAGES="$PACKAGES python3-openssl"
PACKAGES="$PACKAGES python3-pydoc"
PACKAGES="$PACKAGES python3-readline"
PACKAGES="$PACKAGES python3-sqlite3"
PACKAGES="$PACKAGES python3-unittest"
PACKAGES="$PACKAGES python3-urllib"
PACKAGES="$PACKAGES python3-uuid"
PACKAGES="$PACKAGES python3-xml"
PACKAGES="$PACKAGES qBittorrent-static"
PACKAGES="$PACKAGES qmi-utils"
PACKAGES="$PACKAGES r8152-firmware"
PACKAGES="$PACKAGES rclone"
PACKAGES="$PACKAGES rclone-config"
PACKAGES="$PACKAGES rclone-ng"
PACKAGES="$PACKAGES rclone-webui-react"
PACKAGES="$PACKAGES relayd"
PACKAGES="$PACKAGES resize2fs"
PACKAGES="$PACKAGES resolveip"
PACKAGES="$PACKAGES rpcbind"
PACKAGES="$PACKAGES rpcd"
PACKAGES="$PACKAGES rsync"
PACKAGES="$PACKAGES rsyncd"
PACKAGES="$PACKAGES ruby"
PACKAGES="$PACKAGES ruby-bigdecimal"
PACKAGES="$PACKAGES ruby-date"
PACKAGES="$PACKAGES ruby-digest"
PACKAGES="$PACKAGES ruby-enc"
PACKAGES="$PACKAGES ruby-forwardable"
PACKAGES="$PACKAGES ruby-pstore"
PACKAGES="$PACKAGES ruby-psych"
PACKAGES="$PACKAGES ruby-stringio"
PACKAGES="$PACKAGES ruby-strscan"
PACKAGES="$PACKAGES ruby-yaml"
PACKAGES="$PACKAGES samba4-libs"
PACKAGES="$PACKAGES samba4-server"
PACKAGES="$PACKAGES screen"
PACKAGES="$PACKAGES shadowsocks-libev-ss-local"
PACKAGES="$PACKAGES shadowsocks-libev-ss-redir"
PACKAGES="$PACKAGES shadowsocks-libev-ss-server"
PACKAGES="$PACKAGES shadowsocks-rust-sslocal"
PACKAGES="$PACKAGES shadowsocks-rust-ssserver"
PACKAGES="$PACKAGES shadowsocksr-libev-ssr-check"
PACKAGES="$PACKAGES shadowsocksr-libev-ssr-local"
PACKAGES="$PACKAGES shadowsocksr-libev-ssr-redir"
PACKAGES="$PACKAGES shadowsocksr-libev-ssr-server"
PACKAGES="$PACKAGES shairplay"
PACKAGES="$PACKAGES shairport-sync-openssl"
PACKAGES="$PACKAGES shellsync"
PACKAGES="$PACKAGES simple-obfs"
PACKAGES="$PACKAGES smartmontools"
PACKAGES="$PACKAGES snmpd"
PACKAGES="$PACKAGES socat"
PACKAGES="$PACKAGES softethervpn5-bridge"
PACKAGES="$PACKAGES softethervpn5-client"
PACKAGES="$PACKAGES softethervpn5-libs"
PACKAGES="$PACKAGES softethervpn5-server"
PACKAGES="$PACKAGES sqlite3-cli"
PACKAGES="$PACKAGES sqm-scripts"
PACKAGES="$PACKAGES strongswan"
PACKAGES="$PACKAGES strongswan-charon"
PACKAGES="$PACKAGES strongswan-ipsec"
PACKAGES="$PACKAGES strongswan-minimal"
PACKAGES="$PACKAGES strongswan-mod-aes"
PACKAGES="$PACKAGES strongswan-mod-gmp"
PACKAGES="$PACKAGES strongswan-mod-hmac"
PACKAGES="$PACKAGES strongswan-mod-kernel-libipsec"
PACKAGES="$PACKAGES strongswan-mod-kernel-netlink"
PACKAGES="$PACKAGES strongswan-mod-nonce"
PACKAGES="$PACKAGES strongswan-mod-openssl"
PACKAGES="$PACKAGES strongswan-mod-pubkey"
PACKAGES="$PACKAGES strongswan-mod-random"
PACKAGES="$PACKAGES strongswan-mod-sha1"
PACKAGES="$PACKAGES strongswan-mod-socket-default"
PACKAGES="$PACKAGES strongswan-mod-stroke"
PACKAGES="$PACKAGES strongswan-mod-updown"
PACKAGES="$PACKAGES strongswan-mod-x509"
PACKAGES="$PACKAGES strongswan-mod-xauth-generic"
PACKAGES="$PACKAGES strongswan-mod-xcbc"
PACKAGES="$PACKAGES tc-tiny"
PACKAGES="$PACKAGES tcping"
PACKAGES="$PACKAGES terminfo"
PACKAGES="$PACKAGES tinyproxy"
PACKAGES="$PACKAGES tmate"
PACKAGES="$PACKAGES tmux"
PACKAGES="$PACKAGES transmission-daemon-openssl"
PACKAGES="$PACKAGES transmission-web-control"
PACKAGES="$PACKAGES tree"
PACKAGES="$PACKAGES trojan"
PACKAGES="$PACKAGES trojan-go"
PACKAGES="$PACKAGES trojan-plus"
PACKAGES="$PACKAGES ttyd"
PACKAGES="$PACKAGES uboot-envtools"
PACKAGES="$PACKAGES ubox"
PACKAGES="$PACKAGES ubus"
PACKAGES="$PACKAGES ubusd"
PACKAGES="$PACKAGES uci"
PACKAGES="$PACKAGES uclient-fetch"
PACKAGES="$PACKAGES udpxy"
PACKAGES="$PACKAGES uhttpd"
PACKAGES="$PACKAGES uhttpd-mod-ubus"
PACKAGES="$PACKAGES umbim"
PACKAGES="$PACKAGES unzip"
PACKAGES="$PACKAGES uqmi"
PACKAGES="$PACKAGES urandom-seed"
PACKAGES="$PACKAGES urngd"
PACKAGES="$PACKAGES usb-modeswitch"
PACKAGES="$PACKAGES usbutils"
PACKAGES="$PACKAGES usign"
PACKAGES="$PACKAGES uugamebooster"
PACKAGES="$PACKAGES v2ray-core"
PACKAGES="$PACKAGES v2ray-geoip"
PACKAGES="$PACKAGES v2ray-geosite"
PACKAGES="$PACKAGES v2ray-plugin"
PACKAGES="$PACKAGES vim-full"
PACKAGES="$PACKAGES vlmcsd"
PACKAGES="$PACKAGES vpnc-scripts"
PACKAGES="$PACKAGES vsftpd-alt"
PACKAGES="$PACKAGES wget-ssl"
PACKAGES="$PACKAGES whereis"
PACKAGES="$PACKAGES wifischedule"
PACKAGES="$PACKAGES wireguard-tools"
PACKAGES="$PACKAGES wireless-regdb"
PACKAGES="$PACKAGES wol"
PACKAGES="$PACKAGES wpad-wolfssl"
PACKAGES="$PACKAGES wsdd2"
PACKAGES="$PACKAGES wwan"
PACKAGES="$PACKAGES xl2tpd"
PACKAGES="$PACKAGES xray-core"
PACKAGES="$PACKAGES xray-plugin"
PACKAGES="$PACKAGES zerotier"
PACKAGES="$PACKAGES zlib"
PACKAGES="$PACKAGES zoneinfo-asia"
PACKAGES="$PACKAGES zoneinfo-core"
PACKAGES="$PACKAGES zsh"

# 构建镜像
echo "$(date '+%Y-%m-%d %H:%M:%S') - Building image with the following packages:"
echo "$PACKAGES"

# 清理旧构建产物
make clean
make dirclean

# 执行构建
make image PROFILE="$PROFILE" PACKAGES="$PACKAGES" \
  FILES="/home/build/immortalwrt/files" \
  ROOTFS_PARTSIZE="$ROOTFS_PARTSIZE" \
  V=s  # 显示详细日志

if [ $? -ne 0 ]; then
    echo "$(date '+%Y-%m-%d %H:%M:%S') - Error: Build failed!"
    exit 1
fi

echo "$(date '+%Y-%m-%d %H:%M:%S') - Build completed successfully."
